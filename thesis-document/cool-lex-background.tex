\section{Cool-Lex Order on Different Combinatorial Objects}
\subsection{Combinations: Fixed-Weight Binary Strings}
Generating all binary strings with $s$ zeroes and $t$ ones is often referred to as combinations, since each string can be used to represent a choice of $t$ elements from a set of size of $s+t$.  The cool-lex successor rule for generating all fixed-weight binary strings was given by Aaron Williams in his Ph. D thesis and is as follows\cite{williams2009shift}:

\noindent Let $S$ be a binary string of length $n$.

\noindent Let y be the position of the leftmost zero in S and x be the position of the leftmost 1 in S such that $x \ge y$.  Additionally, note that $S_1...S_{x-1}$ is the non-increasing prefix of S.

Let $\leftshift{S}{x}$ be a function that rotates the first i bits of a string S left circularly by one.

More formally, 
\noindent $\leftshift{S}{x}=S_2,S_3,...,S_i,S_1,S_{i-1},S_{i+1},S_{i+2},...,S_{2n}$
\begin{equation*}
    \overleftarrow{\text{cool}}(S) = \begin{cases}
	\leftshift{S}{x} & \text{if $S_{x+1}=1$}\\
	\leftshift{S}{x+1} & otherwise\\
\end{cases}
\end{equation*}

Note that $S_1...S_{x-1}$ must be exactly $1^{y-1}0^{x-y}$, where exponentiation denotes repeated symbols.  Because of this, the two left-shift operations can be replaced with can be replaced with either one or two symbol transpositions.  

\noindent Let $\transpose{S}{i}{j}$ with $1 \le i \le j \le n$ be a function that swaps $S_i$ an $S_j$.  More formally, $\transpose{S}{i}{j}=S_1,S_2,\dots,S_{i-1},S_{j}S_{i+1}\dots S_{j-1}S_i S_{j+1}\dots S_n$
The left-shift rule can be re-stated as follows:

\begin{equation*}
    \overleftarrow{\text{cool}}(S) = \begin{cases}
	\transpose{S}{y}{x} & \text{if $S_{x+1}=1$}\\
	\transpose{\transpose{S}{y}{x}}{1}{x+1} & otherwise\\
\end{cases}
\end{equation*}

% To illustrate the first case, consider $S=11001101$; note that x=5. $\leftshift{5}{1}=11100101$ can be accomplished by just setting $S_3=1$ and $S_5=0$, or alternatively $\transpose{S}{3}{5}$

% To illustrate the second case, consider $S=11100101$; note that x=6. $\leftshift{7}{1}=01110011$ with on  can be accomplished by setting $S_4=1$, $S_6=0$, $S_7=1$, and $S_1=0$.  

%Equivalently, the shift can be performed by $\transpose{\transpose{S}{4}{6}}{1}{7}$

% Thus, depending on the value of $S_{x+1}$, the cool-lex successor rule for binary strings requires either one or two transpositions per combination.  

\subsection{Multiset Permutations}

Cool-lex order has also been shown to enumerate multiset permutations via prefix shifts.  The rule given by Williams is as follows \cite{williams2009loopless}:
\bigskip

\noindent Let S be a multiset of length n.

\noindent Let i be the maximum value such that $S_{j-1} \ge s_j$ for all $2 \le j \le i$.  In other words, i is the length of the non-increasing prefix of S.  

\noindent Let $\sigma_j(S)$ be a function that shifts the ith value of S into the first position, or equivalently rotates the first i elements of S right circularly.  More formally, 

\noindent $\sigma_j(S)=S_j,S_1,S_1,\dots,S_{j-1},S_j+1,\dots,S_n $

Then

\begin{equation*}
    \text{nextPerm}(S) = \begin{cases}
	\sigma_{i+1}(S) & \text{if $i \le n-2$ and $s_{i+2} > s_i$}\\
	\sigma_{i+2}(S) & \text{if $i \le n-2$ and $s_{i+2} \le s_i$}\\
	\sigma_{n}(S) & otherwise\\
\end{cases}
\end{equation*}


See Fig. \ref{permutations} for an example comparison of cool-lex and lexicographic order for two multisets.

This successor rule has the nice property of ensuring that length of the successor's non-increasing prefix is easy to find.

In particular, if $S_{i+2}$ is shifted, then the length of the non-increasing prefix is either 1 if $S_{i+2}\le S_1$ or $i+1$ otherwise. 

Similarly, if $S_{i+1}$ is shifted, then the length of the non-increasing prefix is either 1 if $S_{i+1}\le S_1$ or $i+1$ otherwise. 

This allows for a loopless implementation of the successor rule, as scanning the string to find the length of the non-increasing prefix is not required.  Due to the simplicity and efficiency of this rule, it is used in the ``multicool" package in R, which is used for generating multiset permutations, Bell numbers, and other combinatorial objects \cite{multicool_2021}.   Further information on the package is available here: https://www.rdocumentation.org/packages/multicool/versions/0.1-12

TODO: Common threads among cool-lex order. Non-increasing prefix. 

% \input{tikz_stairs_figure.tex}

